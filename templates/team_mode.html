{% extends 'base.html' %}
{% block title %}
	Team Mode
{% endblock %}
{% block content %}
	<main>
		<div class="container">
			<section class="mx-4 my-3 py-3">
				{% with messages = get_flashed_messages(with_categories=true) %}
					{% if messages %}
						{% for category, message in messages %}
							{% if category == 'error' %}
								<div id="connected_danger" class="text-center alert alert-danger flash alert-dismissible fade show" role="alert">
						            {{ message }}
						            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
								    	<span aria-hidden="true">&times;</span>
								  	</button>
						        </div>
							{% elif category == 'success' %}
								<div id="connected_success" class="text-center alert alert-success flash alert-dismissible fade show" role="alert">
						            {{ message }}
						            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
								    	<span aria-hidden="true">&times;</span>
								  	</button>
						        </div>
							{% endif %}	
						{% endfor %}
					{% endif %}
				{% endwith %}
				<!-- Flashing Messages -->

				<div id="connecting_info" class="text-center alert alert-info flash alert-dismissible fade show" role="alert">
			        Welcome to <img src="{{ url_for('static', filename='images/favicon.png') }}" height="30" class="d-inline-block align-top" alt="mdb logo"> <b> <span class="text-warning">Codeforces</span> <span class="text-primary">Upsolving</span> <span class="text-danger">Helper</span></b>. Feel free to raise <a target="_blank" href="https://github.com/pirateksh/codeforces-upsolving-helper/issues" class="alert-link">issues</a> / <a target="_blank" href="https://github.com/pirateksh/codeforces-upsolving-helper/pulls" class="alert-link">pull requests</a> regarding bugs / improvements.
			        <!-- <button type="button" class="close" data-dismiss="alert" aria-label="Close">
				    	<span aria-hidden="true">&times;</span>
				  	</button> -->
			    </div>
			    <div id="update" class="text-center alert alert-warning flash alert-dismissible fade show" role="alert">
			        You are viewing <a class="alert-link">Team Mode</a>. This mode is currently under development.
			    </div>
			    <!-- Flashing Messages -->
<!-- 				<div class="alert alert-warning flash alert-dismissible fade show" role="alert">
			        If you witness <a class="alert-link">Internal Server Error</a>, try again after sometime. If it persists raise an <a target="_blank" href="https://github.com/pirateksh/codeforces-upsolving-helper/issues" class="alert-link">issue</a> on github stating the <b>Codeforces Handle</b> you entered.
			        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
				    	<span aria-hidden="true">&times;</span>
				  	</button>
			    </div> -->
				<!-- Form Card -->
				<div class="card text-center">
					<form method="post" action="{{ url_for('team_mode') }}">
						<div class="card-header">
							Enter your <img src="{{ url_for('static', filename='images/codeforces-icon.png') }}" height="35" class="d-inline-block align-top" alt="mdb logo"> <span class="text-info">Codeforces</span> Handle !
						</div>
						<div class="card-body">
							<div class="md-form form-lg input-group my-0">
								<div class="input-group-prepend">
							        <span class="input-group-text" id="basic-addon11">@</span>
							    </div>
								<input type="text" id="team_user_handles" name="team_user_handles" class="form-control form-control-lg" aria-label="Username" aria-describedby="basic-addon11" placeholder="Codeforces Handle(s) separated by comma (max. 5)" >
							</div>
							<button onclick="f()" type="submit" class="btn btn-info btn-rounded">Enter</button>
						</div>
						<div class="card-footer text-muted">
						    Please wait <i class="fas fa-clock"></i> after clicking on Enter Button.
						</div>
					</form>
				</div>
				<!-- Form Card -->

				<br>
				{% if status %}
					{% if status == "OK" %}
						<div class="card text-center">
							<div class="card-header">
								Status: {{ status }}
							</div>
							<div class="card-body">
								{% if team_info %}
									<h5>Team Info ({{ team_info|length }} members)</h5>
									<div class="table-responsive text-nowrap">
										<table class="table table-hover table-sm">
											<thead>
										    	<tr>
										      		<th scope="col">#</th>
										      		<th scope="col">Handle</th>
										    	</tr>
										  	</thead>
										  	<tbody>
										  		{% for user in team_info %}
										  		 	<tr>
											  			<th scope="row">{{ loop.index }}</th>
											  			<td><b><a target="_blank" href="https://codeforces.com/profile/{{ user.handle }}" class="{{ user.color }}">{{ user.title }} {{ user.handle }}</a></b></td>
											  		</tr>
										  		{% endfor %}
										 	</tbody>
										</table>
									</div>
								{% endif %}
							</div>
							<div class="card-footer text-muted">
								Star <i class="fas fa-star black-text"></i> the <a class="text-info" href="https://github.com/pirateksh/codeforces-upsolving-helper" target="_blank">repository</a> on Github if this helped you. <i class="fas fa-grin yellow-text"></i>
							</div>
						</div>
						<br/>
						<div class="card text-center">
							<div class="card-header">
								Segregate by Index / Problem Rating
							</div>
							<div class="card-body">
								<!-- Default inline 1-->
								<form onchange="toggleSegregation()">
									<div class="row">
										<div class="col-6">
											<div class="custom-control custom-radio">
											<input class="custom-control-input" type="radio" id="radioByIndex" name="r"  checked>
									  		<label class="custom-control-label" for="radioByIndex"><i class="fas fa-sort-alpha-down"></i> Index</label>
									  		</div>
										</div>
										<div class="col-6">
											<div class="custom-control custom-radio">
											<input class="custom-control-input" type="radio" id="radioByRating" name="r">
									  		<label class="custom-control-label" for="radioByRating"><i class="fas fa-chart-line"></i> Rating</label>
									  		</div>
										</div>
									</div>
								</form>
							</div>
						</div>
						<br/>
						<section id="segregationInfo">
							<div class="text-center alert alert-primary flash alert-dismissible fade show" role="alert">
						        Currently Problems are segregated based on <a class="alert-link"> <i class="fas fa-sort-alpha-down"></i> Index (A, B, C and so on)</a>.
						    </div>	
						</section>
						
						
						<!-- Problems Segregated by Rating -->
					{% else %}
						<div class="card text-center">
							<div class="card-header">
								Status: {{ status }}
							</div>
							<div class="card-body">
								{{ comment }}
							</div>
							<div class="card-footer text-muted">
							    Star <i class="fas fa-star black-text"></i> the <a class="text-info" href="https://github.com/pirateksh/codeforces-upsolving-helper" target="_blank">repository</a> on Github if this helped you. <i class="fas fa-grin yellow-text"></i>
							</div>
						</div>
					{% endif %}
				{% else %}
					<div class="card text-center">
						<div class="card-header">
							What is <img src="{{ url_for('static', filename='images/favicon.png') }}" height="30" class="d-inline-block align-top" alt="mdb logo"><b> <span class="text-warning">Codeforces</span> <span class="text-primary">Upsolving</span> <span class="text-danger">Helper</span></b> ?
						</div>
						<div class="card-body">
							<p class="text-black-50">A web app developed using <a class="text-info" href="https://flask.palletsprojects.com/en/1.1.x/quickstart/#a-minimal-application" target="_blank">Flask</a> that compiles all the Problems on <a class="text-info" href="https://codeforces.com/" target="_blank">Codeforces</a> that you have attempted (submitted at least once) but could not get <span class="text-success">Accepted</span> verdict. For convenience, the problems can be segregated by <b>Index</b> (i.e. A, B, and so on) OR <b>Rating (i.e. Less than 1000, Between 1000 and 1200, and so on)</b>. Click on the Problem Name to visit the original problem page on <a class="text-info" href="https://codeforces.com/" target="_blank">Codeforces</a>, solve it, come back here and repeat. Good Luck and High Rating!
							</p>
						</div>
						<div class="card-footer text-muted">
						    Star <i class="fas fa-star black-text"></i> the <a class="text-info" href="https://github.com/pirateksh/codeforces-upsolving-helper" target="_blank">repository</a> on Github if this helped you. <i class="fas fa-grin yellow-text"></i>
						</div>
					</div>
				{% endif %}
			</section>
		</div>
	</main>
{% endblock %}